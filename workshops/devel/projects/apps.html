
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Adding additional Django apps to your GeoNode Project &mdash; GeoNode Developers Workshop 2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="GeoNode Developers Workshop 2.0 documentation" href="../index.html" />
    <link rel="up" title="Customized GeoNode Projects" href="index.html" />
    <link rel="next" title="Integrating your project with other systems" href="integration.html" />
    <link rel="prev" title="Theming your GeoNode project" href="theme.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../index.html">GeoNode Developers Workshop</a>
      <span class="navbar-text pull-left"><b>2.0</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown">
  <a href="../index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction to GeoNode development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Development Prerequsites and Core Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Customized GeoNode Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Loading Data into a GeoNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug/index.html">GeoNode debugging techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">GeoNode APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envsetup/index.html">Setting up a GeoNode development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">GeoNode&#8217;s development process</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Adding additional Django apps to your GeoNode Project</a><ul>
<li><a class="reference internal" href="#django-pluggable-apps">Django pluggable apps</a></li>
<li><a class="reference internal" href="#adding-your-own-django-app">Adding your own Django app</a></li>
<li><a class="reference internal" href="#adding-a-3rd-party-blog-app">Adding a 3rd party blog app</a></li>
<li><a class="reference internal" href="#adding-other-apps">Adding other apps</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          
          
            
  <li><a href="theme.html"
         title="previous chapter">&laquo; Theming your GeoNode project</a></li>
  <li><a href="integration.html"
         title="next chapter">Integrating your project with other systems &raquo;</a></li>
          
          
            <li>
  <a href="../_sources/projects/apps.txt"
     rel="nofollow">Source</a></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <div class="section" id="adding-additional-django-apps-to-your-geonode-project">
<span id="projects-apps"></span><h1>Adding additional Django apps to your GeoNode Project<a class="headerlink" href="#adding-additional-django-apps-to-your-geonode-project" title="Permalink to this headline">¶</a></h1>
<p>Since GeoNode is based on Django, your GeoNode project can be augmented and enhanced by adding additional third-party pluggable Django apps or by writing an app of your own.</p>
<p>This section of the workshop will introduce you to the Django pluggable app ecosystem, and walk you through the process of writing your own app and adding a blog app to your project.</p>
<div class="section" id="django-pluggable-apps">
<h2>Django pluggable apps<a class="headerlink" href="#django-pluggable-apps" title="Permalink to this headline">¶</a></h2>
<p>The Django app ecosystem provides a large number of apps that can be added to your project. Many are mature and used in many existing projects and sites, while others are under active early-stage development. Websites such as <a class="reference external" href="http://www.djangopackages.com/">Django Packages</a> provide an interface for discovering and comparing all the apps that can plugged in to your Django project. You will find that some can be used with very little effort on your part, and some will take more effort to integrate.</p>
</div>
<div class="section" id="adding-your-own-django-app">
<h2>Adding your own Django app<a class="headerlink" href="#adding-your-own-django-app" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s walk through the an example of the steps necessary to create a very basic Django polling app to and add it to your GeoNode project. This section is an abridged version of the Django tutorial itself and it is strongly recommended that you go through this external tutorial along with this section as it provides much more background material and a signficantly higher level of detail. You should become familiar with all of the information in the Django tutorial as it is critical to your success as a GeoNode project developer.</p>
<p>Throughout this section, we will walk through the creation of a basic poll application. It will consist of two parts:</p>
<ul class="simple">
<li>A public site that lets people view polls and vote in them.</li>
<li>An admin site that lets you add, change, and delete polls.</li>
</ul>
<p>Since we have already created our GeoNode project from a template project, we will start by creating our app structure and then adding models:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> python manage.py startapp polls
</pre></div>
</div>
</div></blockquote>
<p>That&#8217;ll create a directory polls, which is laid out like this:</p>
<div class="highlight-python"><pre>polls/
    __init__.py
    models.py
    tests.py
    views.py</pre>
</div>
<p>This directory structure will house the poll application.</p>
<p>The first step in writing a database web app in Django is to define your models—essentially, your database layout with additional metadata.</p>
<p>In our simple poll app, we&#8217;ll create two models: polls and choices. A poll has a question and a publication date. A choice has two fields: the text of the choice and a vote tally. Each choice is associated with a poll.</p>
<p>These concepts are represented by simple Python classes.</p>
<p>Edit the <tt class="file docutils literal"><span class="pre">polls/models.py</span></tt> file so it looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">&#39;date published&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">question</span>

<span class="k">class</span> <span class="nc">Choice</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">votes</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">choice</span>
</pre></div>
</div>
<p>That small bit of model code gives Django a lot of information. With it, Django is able to:</p>
<ul class="simple">
<li>Create a database schema (CREATE TABLE statements) for this app.</li>
<li>Create a Python database-access API for accessing Poll and Choice objects.</li>
</ul>
<p>But first we need to tell our project that the polls app is installed.</p>
<p>Edit the <tt class="file docutils literal"><span class="pre">&lt;my_geonode&gt;/settings.py</span></tt> file, and update the INSTALLED_APPS setting to include the string &#8220;polls&#8221;. So it will look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>

    <span class="c"># Apps bundled with Django</span>
    <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sitemaps&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.humanize&#39;</span><span class="p">,</span>

    <span class="c">#Third party apps</span>

    <span class="c"># &lt;snip&gt;</span>

    <span class="c"># GeoNode internal apps</span>
    <span class="s">&#39;geonode.maps&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.upload&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.layers&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.people&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.proxy&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.security&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.search&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.catalogue&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.documents&#39;</span><span class="p">,</span>

    <span class="c"># My GeoNode apps</span>
    <span class="s">&#39;polls&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Now Django knows to include the polls app. Let&#8217;s run another command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> python manage.py syncdb
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">syncdb</span></tt> command runs the SQL from <tt class="docutils literal"><span class="pre">sqlall</span></tt> on your database for all apps in INSTALLED_APPS that don&#8217;t already exist in your database. This creates all the tables, initial data, and indexes for any apps you&#8217;ve added to your project since the last time you ran <tt class="docutils literal"><span class="pre">syncdb</span></tt>. <tt class="docutils literal"><span class="pre">syncdb</span></tt> can be called as often as you like, and it will only ever create the tables that don&#8217;t exist.</p>
<p>GeoNode uses south for migrations ...</p>
<p>Next, let&#8217;s add the Django admin configuration for our polls app so that we can use the Django Admin to manage the records in our database. Create and edit a new file called <tt class="file docutils literal"><span class="pre">polls/admin.py</span></tt> and make it look like the this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the development server and explore the polls app in the Django Admin by pointing your browser to <a class="reference external" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a> and logging in with the credentials you specified when you first ran <tt class="docutils literal"><span class="pre">syncdb</span></tt>.</p>
<div class="figure">
<img alt="../_images/admin_top.png" src="../_images/admin_top.png" />
</div>
<p>You can see all of the other apps that are installed as part of your GeoNode project, but we are specifically interested in the Polls app for now.</p>
<div class="figure">
<img alt="../_images/admin_polls.png" src="../_images/admin_polls.png" />
</div>
<p>Next we will add a new poll via automatically generated admin form.</p>
<div class="figure">
<img alt="../_images/add_new_poll.png" src="../_images/add_new_poll.png" />
</div>
<p>You can enter any sort of question you want for initial testing and select today and now for the publication date.</p>
<div class="figure">
<img alt="../_images/add_poll.png" src="../_images/add_poll.png" />
</div>
<p>The next step is to configure the Choice model in the admin, but we will configure the choices to be editable in-line with the Poll objects they are attached to. Edit the same <tt class="file docutils literal"><span class="pre">polls/admin.py</span></tt> so it now looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span><span class="p">,</span> <span class="n">Choice</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">ChoiceInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">StackedInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Choice</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">3</span>

<span class="k">class</span> <span class="nc">PollAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="bp">None</span><span class="p">,</span>               <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;question&#39;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="s">&#39;Date information&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;pub_date&#39;</span><span class="p">],</span> <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;collapse&#39;</span><span class="p">]}),</span>
    <span class="p">]</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ChoiceInline</span><span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">PollAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p>This tells Django that Choice objects are edited on the Poll admin page, and by default, provide enough fields for 3 choices.</p>
<p>You can now return to the Poll admin and either add a new poll or edit the one you already created and see that you can now specify the poll choices inline with the poll itself.</p>
<div class="figure">
<img alt="../_images/choice_admin.png" src="../_images/choice_admin.png" />
</div>
<p>From here, we want to create views to display the polls inside our GeoNode project. A view is a &#8220;type&#8221; of Web page in your Django application that generally serves a specific function and has a specific template. In our poll application, there will be the following four views:</p>
<ul class="simple">
<li>Poll &#8220;index&#8221; page—displays the latest few polls.</li>
<li>Poll &#8220;detail&#8221; page—displays a poll question, with no results but with a form to vote.</li>
<li>Poll &#8220;results&#8221; page—displays results for a particular poll.</li>
<li>Vote action—handles voting for a particular choice in a particular poll.</li>
</ul>
<p>The first step of writing views is to design your URL structure. You do this by creating a Python module called a URLconf. URLconfs are how Django associates a given URL with given Python code.</p>
<p>Let&#8217;s start by adding our URL configuration directly to the <tt class="file docutils literal"><span class="pre">urls.py</span></tt> that already exists in your project at <tt class="file docutils literal"><span class="pre">&lt;my_geonode&gt;/urls.py</span></tt>. Edit this file and add the following lines after the rest of the existing imports around line 80:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.index&#39;</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.detail&#39;</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.results&#39;</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.vote&#39;</span><span class="p">),</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Eventually we will want to move this set of URL configurations inside the URLs app itself, but for the sake of brevity in this workshop, we will put them in the main <tt class="file docutils literal"><span class="pre">urls.py</span></tt> for now. You can consult the Django tutorial for more information on this topic.</p>
</div>
<p>Next write the views to drive the URL patterns we configured above. Edit polls/views.py to that it looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">Context</span><span class="p">,</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/index.html&#39;</span><span class="p">,</span>
        <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">:</span> <span class="n">latest_poll_list</span><span class="p">}))</span>

<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Poll</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/detail.html&#39;</span><span class="p">,</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">}))</span>

<span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;You&#39;re looking at the results of poll </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">poll_id</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;You&#39;re voting on poll </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">poll_id</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We have only stubbed in the views for the results and vote pages. They are not very useful as-is. We will revisit these later.</p>
</div>
<p>Now we have views in place, but we are referencing templates that do not yet exist. Let&#8217;s add them by first creating a template directory in your polls app at <tt class="file docutils literal"><span class="pre">polls/templates/polls</span></tt> and creating <tt class="file docutils literal"><span class="pre">polls/templates/polls/index.html</span></tt> to look like the following:</p>
<div class="highlight-html"><div class="highlight"><pre>{% if latest_poll_list %}
    <span class="nt">&lt;ul&gt;</span>
    {% for poll in latest_poll_list %}
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/polls/{{ poll.id }}/&quot;</span><span class="nt">&gt;</span>{{ poll.question }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {% endfor %}
    <span class="nt">&lt;/ul&gt;</span>
{% else %}
    <span class="nt">&lt;p&gt;</span>No polls are available.<span class="nt">&lt;/p&gt;</span>
{% endif %}
</pre></div>
</div>
<p>Next we need to create the template for the poll detail page. Create a new file at <tt class="file docutils literal"><span class="pre">polls/templates/polls/detail.html</span></tt> to look like the following:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>{{ poll.question }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
{% for choice in poll.choice_set.all %}
    <span class="nt">&lt;li&gt;</span>{{ choice.choice }}<span class="nt">&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>You can now visit <a class="reference external" href="http://localhost:8000/polls/">http://localhost:8000/polls/</a> in your browser and you should see the the poll question you created in the admin presented like this.</p>
<div class="figure">
<img alt="../_images/polls_plain.png" src="../_images/polls_plain.png" />
</div>
<p>We actually want our polls app to display as part of our GeoNode project with the same theme, so let&#8217;s update the two templates we created above to make them extend from the <tt class="file docutils literal"><span class="pre">site_base.html</span></tt> template we looked at in the last section. You will need to add the following two lines to the top of each file:</p>
<div class="highlight-html"><div class="highlight"><pre>{% extends &#39;site_base.html&#39; %}
{% block body %}
</pre></div>
</div>
<p>And close the block at the bottom of each file with:</p>
<div class="highlight-html"><div class="highlight"><pre>{% endblock %}
</pre></div>
</div>
<p>This tells Django to extend from the <tt class="file docutils literal"><span class="pre">site_base.html</span></tt> template so your polls app has the same style as the rest of your GeoNode, and it specifies that the content in these templates should be rendered to the body block defined in GeoNode&#8217;s <tt class="file docutils literal"><span class="pre">base.html</span></tt> template that your <tt class="file docutils literal"><span class="pre">site_base.html</span></tt> extends from.</p>
<p>You can now visit the index page of your polls app and see that it is now wrapped in the same style as the rest of your GeoNode site.</p>
<div class="figure">
<img alt="../_images/polls_geonode.png" src="../_images/polls_geonode.png" />
</div>
<p>If you click on a question from the list you will be taken to the poll detail page.</p>
<div class="figure">
<img alt="../_images/poll_geonode_hidden.png" src="../_images/poll_geonode_hidden.png" />
</div>
<p>It looks like it is empty, but in fact the text is there, but styled to be white by the Bootswatch theme we added in the last section. If you highlight the area where the text is, you will see that it is there.</p>
<div class="figure">
<img alt="../_images/poll_geonode_highlight.png" src="../_images/poll_geonode_highlight.png" />
</div>
<p>Now that you have walked through the basic steps to create a very minimal (though not very useful) Django app and integrated it with your GeoNode project, you should pick up the Django tutorial at part 4 and follow it to add the form for actually accepting responses to your poll questions.</p>
<p>We strongly recommend that you spend as much time as you need with the Django tutorial itself until you feel comfortable with all of the concepts. They are the essential building blocks you will need to extend your GeoNode project by adding your own apps.</p>
</div>
<div class="section" id="adding-a-3rd-party-blog-app">
<h2>Adding a 3rd party blog app<a class="headerlink" href="#adding-a-3rd-party-blog-app" title="Permalink to this headline">¶</a></h2>
<p>Now that we have created our own app and added it to our GeoNode project, the next thing we will work through is adding a 3rd party blog app. There are a number of blog apps that you can use, but for purposes of this workshop, we will use a relatively simple, yet extensible app called <a class="reference external" href="http://django-blog-zinnia.com/blog/">Zinnia</a>. You can find out more information about Zinnia on its website or on its <a class="reference external" href="https://github.com/Fantomas42/django-blog-zinnia">GitHub project page</a> or by following its <a class="reference external" href="http://django-blog-zinnia.com/documentation/">documentation</a>. This section will walk you through the minimal set of steps necessary to add Zinnia to your GeoNode project.</p>
<p>The first thing to do is to install Zinnia into the virtualenv that you are working in. Make sure your virtualenv is activated and execute the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> pip install django-blog-zinnia
</pre></div>
</div>
<p>This will install Zinnia and all of the libraries that it depends on.</p>
<p>Next add Zinnia to the INSTALLED_APPS section of your GeoNode projects <tt class="file docutils literal"><span class="pre">settings.py</span></tt> file by editing <tt class="file docutils literal"><span class="pre">&lt;my_geonode&gt;/settings.py</span></tt> and adding &#8216;django.contrib.comments&#8217; to the section labeled &#8220;Apps Bundled with Django&#8221; so that it looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Apps bundled with Django</span>
<span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.sitemaps&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.humanize&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.comments&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>And then add the <tt class="docutils literal"><span class="pre">tagging</span></tt>, <tt class="docutils literal"><span class="pre">mptt</span></tt> and <tt class="docutils literal"><span class="pre">zinnia</span></tt> apps to the end of the INSTALLED_APPS where we previously added a section labeled &#8220;My GeoNode apps&#8221;. It should like like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># My GeoNode apps</span>
<span class="s">&#39;polls&#39;</span><span class="p">,</span>
<span class="s">&#39;tagging&#39;</span><span class="p">,</span>
<span class="s">&#39;mptt&#39;</span><span class="p">,</span>
<span class="s">&#39;zinnia&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>Next you will need to run <tt class="docutils literal"><span class="pre">syncdb</span></tt> again to synchronize the models for the apps we have just added to our project&#8217;s database. This time we want to pass the <tt class="docutils literal"><span class="pre">--all</span></tt> flag to <tt class="docutils literal"><span class="pre">syncdb</span></tt> so it ignores the schema migrations. Schema migrations are discussed further in GeoNode&#8217;s documentation, but it is safe to ignore them here.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> python manage.py syncdb --all
</pre></div>
</div>
<p>You can now restart the development server and visit the Admin interface and scroll to the very bottom of the list to find a section for Zinnia that allows you to manage database records for Categories and Blog Entries.</p>
<div class="figure">
<img alt="../_images/zinnia_admin.png" src="../_images/zinnia_admin.png" />
</div>
<p>Next we need to configure our project to add Zinnia&#8217;s URL configurations. Add the following two URL configuration entries to the end of <tt class="file docutils literal"><span class="pre">&lt;my_geonode&gt;/urls.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^blog/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;zinnia.urls&#39;</span><span class="p">)),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^djcomments/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;django.contrib.comments.urls&#39;</span><span class="p">)),</span>
</pre></div>
</div>
<p>If you visit the main blog page in your browser at <a class="reference external" href="http://localhost:8000/blog/">http://localhost:8000/blog/</a> you will find that the blog displays with Zinnia&#8217;s default theme as shown below.</p>
<div class="figure">
<img alt="../_images/zinnia_default.png" src="../_images/zinnia_default.png" />
</div>
<p>This page includes some guidance for us on how to change the default theme. The first thing we need to do is to copy Zinnia&#8217;s <tt class="file docutils literal"><span class="pre">base.html</span></tt> template into our own project so we can modify it. When you installed Zinnia, templates were installed to <tt class="file docutils literal"><span class="pre">/var/lib/geonode/lib/python2.7/site-packages/zinnia/templates/zinnia/</span></tt>. You can copy the base template by executing the following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> mkdir &lt;my_geonode&gt;/templates/zinnia
<span class="gp">$</span> cp /var/lib/geonode/lib/python2.7/site-packages/zinnia/templates/zinnia/base.html &lt;my_geonode&gt;/templates/zinnia/
</pre></div>
</div>
<p>Then you need to edit this file and change the topmost line to read as below such that this template extends from our projects <tt class="file docutils literal"><span class="pre">site_base.html</span></tt> rather than the zinnia <tt class="file docutils literal"><span class="pre">skeleton.html</span></tt>:</p>
<div class="highlight-html"><div class="highlight"><pre>{% extends &quot;site_base.html&quot; %}
</pre></div>
</div>
<p>Since Zinnia uses a different block naming scheme than GeoNode does, you need to add the following line to the bottom of your site_base.html file so that the content block gets rendered properly:</p>
<div class="highlight-html"><div class="highlight"><pre>{% block body %}{% block content %}{% endblock %}{% endblock %}
</pre></div>
</div>
<div class="figure">
<img alt="../_images/zinnia_geonode.png" src="../_images/zinnia_geonode.png" />
</div>
<p>You can see that there are currently no blog entries, so let&#8217;s add one. Scroll to the bottom of the interface and click the <em class="guilabel">Post an Entry</em> link to go to the form in the Admin interface that lets you create a blog post. Go ahead and fill out the form with some information for testing purposes. Make sure that you change the Status dropdown to &#8220;published&#8221; so the post shows up right away.</p>
<div class="figure">
<img alt="../_images/zinnia_create_post.png" src="../_images/zinnia_create_post.png" />
</div>
<p>You can explore all of the options available to you as you create your post, and when you are done, click the <em class="guilabel">Save</em> button. You will be taken to the page that shows the list of all your blog posts.</p>
<div class="figure">
<img alt="../_images/zinnia_post_list.png" src="../_images/zinnia_post_list.png" />
</div>
<p>You can then visit your blog post/entry at <a class="reference external" href="http://localhost:8000/blog/">http://localhost:8000/blog/</a>.</p>
<div class="figure">
<img alt="../_images/zinnia_blog.png" src="../_images/zinnia_blog.png" />
</div>
<p>And if you click on the blog post title, you will be taken to the page for the complete blog post. You and your users can leave comments on this post and various other blog features from this page.</p>
<div class="figure">
<img alt="../_images/zinnia_post.png" src="../_images/zinnia_post.png" />
</div>
<p>The last thing we need to do to fully integrate this blog app (and our polls app) into our site is to add it to the options on the navbar. To do so, we need to add the following block override to our Projects <tt class="file docutils literal"><span class="pre">site_base.html</span></tt>:</p>
<div class="highlight-html"><div class="highlight"><pre>{% block extra-nav %}
<span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">&quot;nav_polls&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/polls/&quot;</span><span class="nt">&gt;</span>Polls<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">&quot;nav_blog&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{% url zinnia_entry_archive_index %}&quot;</span><span class="nt">&gt;</span>Blog<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/li&gt;</span>
{% endblock %}
</pre></div>
</div>
<div class="figure">
<img alt="../_images/navbar_add.png" src="../_images/navbar_add.png" />
</div>
<p>At this point, you could explore options for tighter integration between your GeoNode project and Zinnia. Integrating blog posts from Zinnia into your overall search could be useful, as well as including the blog posts a user has written on their Profile Page. You could also explore the additional plugins that go with Zinnia.</p>
</div>
<div class="section" id="adding-other-apps">
<h2>Adding other apps<a class="headerlink" href="#adding-other-apps" title="Permalink to this headline">¶</a></h2>
<p>Now that you have both written your own app and plugged in a 3rd party one, you can explore sites like Django Packages to look for other modules that you could plug into your GeoNode project to meet your needs and requirements. For many types of apps, there are several options and Django Packages is a nice way to compare them. You may find that some apps require significantly more work to integrate into your app than others, but reaching out to the app&#8217;s author and/or developers should help you get over any difficulties you may encounter.</p>
<div class="figure">
<img alt="../_images/django_packages.png" src="../_images/django_packages.png" />
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright GeoNode Development Community.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>