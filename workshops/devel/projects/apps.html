
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Adding Additional Django apps to your GeoNode Project &mdash; GeoNode Developers Workshop 2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="GeoNode Developers Workshop 2.0 documentation" href="../index.html" />
    <link rel="up" title="Customized GeoNode Projects" href="index.html" />
    <link rel="next" title="Integrating your Project with other Systems" href="integration.html" />
    <link rel="prev" title="Theming your GeoNode Project" href="theme.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../index.html">GeoNode Developers Workshop</a>
      <span class="navbar-text pull-left"><b>2.0</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown">
  <a href="../index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction to GeoNode development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Development Prerequsites and Core Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Customized GeoNode Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envsetup/index.html">Setting up a GeoNode development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Loading Data into a GeoNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">GeoNode APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug/index.html">GeoNode debugging techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">GeoNode&#8217;s development process</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Adding Additional Django apps to your GeoNode Project</a><ul>
<li><a class="reference internal" href="#intro-to-django-pluggable-apps">Intro to Django Pluggable Apps</a></li>
<li><a class="reference internal" href="#adding-your-own-django-app">Adding your own Django App</a></li>
<li><a class="reference internal" href="#adding-a-3rd-party-blog-app">Adding a 3rd Party Blog App</a></li>
<li><a class="reference internal" href="#adding-other-apps">Adding Other Apps</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          
          
            
  <li><a href="theme.html"
         title="previous chapter">&laquo; Theming your GeoNode Project</a></li>
  <li><a href="integration.html"
         title="next chapter">Integrating your Project with other Systems &raquo;</a></li>
          
          
            <li>
  <a href="../_sources/projects/apps.txt"
     rel="nofollow">Source</a></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <div class="section" id="adding-additional-django-apps-to-your-geonode-project">
<span id="apps"></span><h1>Adding Additional Django apps to your GeoNode Project<a class="headerlink" href="#adding-additional-django-apps-to-your-geonode-project" title="Permalink to this headline">¶</a></h1>
<p>Since GeoNode is based on Django, your GeoNode project can be augmented and enhanced by adding additional third-party pluggable Django apps or by writing an app of your own.</p>
<p>This section of the workshop will introduce you to the Django pluggable app ecosystem, and walk you through the process of writing your own app and adding a blog app to your project.</p>
<div class="section" id="intro-to-django-pluggable-apps">
<h2>Intro to Django Pluggable Apps<a class="headerlink" href="#intro-to-django-pluggable-apps" title="Permalink to this headline">¶</a></h2>
<p>The Django app ecosystem provides a large number of apps that can be added to your project. Many are mature and used in many existing projects and sites, while others are under active early-stage development. Websites such as Django Packages provide an interface for discovering and comparing all the apps that can plugged in to your Django project. You will find that some can be used with very little effort on your part, and some will take more effort to integrate.</p>
<p><a class="reference external" href="http://www.djangopackages.com/">http://www.djangopackages.com/</a></p>
</div>
<div class="section" id="adding-your-own-django-app">
<h2>Adding your own Django App<a class="headerlink" href="#adding-your-own-django-app" title="Permalink to this headline">¶</a></h2>
<p>Lets walk through the an example of the set of steps necessary to create a very basic django polling app to and add it to your GeoNode project. This section is an abridged version of the Django tutorial itself and it is strongly recommended that you go through this external tutorial along with this section as it provides much more background material and a signficantly higher level of detail. You should become familiar with all of the information in the Django Tutorial as it is critical to your success as a GeoNode project developer.</p>
<p>Throughout this section, we will walk  through the creation of a basic poll application.</p>
<p>It’ll consist of two parts:</p>
<ul class="simple">
<li>A public site that lets people view polls and vote in them.</li>
<li>An admin site that lets you add, change and delete polls.</li>
</ul>
<p>Since we have already created our GeoNode project from a template project, we will start by creating our app structure and then adding models:</p>
<div class="highlight-python"><pre>$ python manage.py startapp polls</pre>
</div>
<p>That&#8217;ll create a directory polls, which is laid out like this:</p>
<div class="highlight-python"><pre>polls/
    __init__.py
    models.py
    tests.py
    views.py</pre>
</div>
<p>This directory structure will house the poll application.</p>
<p>The first step in writing a database Web app in Django is to define your models &#8211; essentially, your database layout, with additional metadata.</p>
<p>In our simple poll app, we&#8217;ll create two models: polls and choices. A poll has a question and a publication date. A choice has two fields: the text of the choice and a vote tally. Each choice is associated with a poll.</p>
<p>These concepts are represented by simple Python classes.</p>
<p>Edit the polls/models.py file so it looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">&#39;date published&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">question</span>

<span class="k">class</span> <span class="nc">Choice</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">votes</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">choice</span>
</pre></div>
</div>
<p>That small bit of model code gives Django a lot of information. With it, Django is able to:</p>
<ul class="simple">
<li>Create a database schema (CREATE TABLE statements) for this app.</li>
<li>Create a Python database-access API for accessing Poll and Choice objects.</li>
<li>But first we need to tell our project that the polls app is installed.</li>
</ul>
<p>Edit the my_geonode/settings.py file, and update the INSTALLED_APPS setting to include the string &#8216;polls&#8217;. So it&#8217;ll look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>

    <span class="c"># Apps bundled with Django</span>
    <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sitemaps&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.humanize&#39;</span><span class="p">,</span>

    <span class="c">#Third party apps</span>

    <span class="c"># &lt;snip&gt;</span>

    <span class="c"># GeoNode internal apps</span>
    <span class="s">&#39;geonode.maps&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.upload&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.layers&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.people&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.proxy&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.security&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.search&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.catalogue&#39;</span><span class="p">,</span>
    <span class="s">&#39;geonode.documents&#39;</span><span class="p">,</span>

    <span class="c"># My GeoNode apps</span>
    <span class="s">&#39;polls&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Now Django knows to include the polls app. Let&#8217;s run another command:</p>
<div class="highlight-python"><pre>$ python manage.py syncdb</pre>
</div>
<p>The syncdb command runs the SQL from sqlall on your database for all apps in INSTALLED_APPS that don&#8217;t already exist in your database. This creates all the tables, initial data and indexes for any apps you&#8217;ve added to your project since the last time you ran syncdb. syncdb can be called as often as you like, and it will only ever create the tables that don&#8217;t exist.</p>
<p>GeoNode uses south for migrations ...</p>
<p>Next, lets add the Django admin configuration for our polls app so that we can use the Django Admin to manage the records in our database. Edit a new file called polls/admin.py and make it look like the this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the development server and explore the polls app in the Django Admin by pointing your browser to <a class="reference external" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a> and logging in with the credentials you specified when you first ran syncdb.</p>
<div class="figure">
<img alt="../_images/admin_top.png" src="../_images/admin_top.png" />
</div>
<p>You can see all of the other apps that are installed as part of your GeoNode project, but we are specifically interested in our Polls app for now.</p>
<div class="figure">
<img alt="../_images/admin_polls.png" src="../_images/admin_polls.png" />
</div>
<p>Next we will add a new poll via automatically generated admin form.</p>
<div class="figure">
<img alt="../_images/add_new_poll.png" src="../_images/add_new_poll.png" />
</div>
<p>You can enter any sort of question you want for initial testing and select today and now for the publication date.</p>
<div class="figure">
<img alt="../_images/add_poll.png" src="../_images/add_poll.png" />
</div>
<p>The next step is to configure the Choice model in the admin, but we will configure the choices to be editable inline with the Poll objects they are attached to. Edit the same polls/admin.py so it now looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span><span class="p">,</span> <span class="n">Choice</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">ChoiceInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">StackedInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Choice</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">3</span>

<span class="k">class</span> <span class="nc">PollAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="bp">None</span><span class="p">,</span>               <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;question&#39;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="s">&#39;Date information&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;pub_date&#39;</span><span class="p">],</span> <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;collapse&#39;</span><span class="p">]}),</span>
    <span class="p">]</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ChoiceInline</span><span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">PollAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p>This tells Django: &#8220;Choice objects are edited on the Poll admin page. By default, provide enough fields for 3 choices.&#8221;</p>
<p>You can now return to the Poll admin and either add a new poll or edit the one you already created and see that you can now specify the poll choices inline with the poll itself..</p>
<div class="figure">
<img alt="../_images/choice_admin.png" src="../_images/choice_admin.png" />
</div>
<p>From here, we want to create views to display the polls inside our GeoNode project.A view is a “type” of Web page in your Django application that generally serves a specific function and has a specific template. In our poll application, we’ll have the following four views:</p>
<ul class="simple">
<li>Poll “index” page – displays the latest few polls.</li>
<li>Poll “detail” page – displays a poll question, with no results but with a form to vote.</li>
<li>Poll “results” page – displays results for a particular poll.</li>
<li>Vote action – handles voting for a particular choice in a particular poll.</li>
</ul>
<p>The first step of writing views is to design your URL structure. You do this by creating a Python module, called a URLconf. URLconfs are how Django associates a given URL with given Python code.</p>
<p>Lets start by adding our url configuration directly to the urls.py that already exists in your project my_geonode/urls.py. Edit this file and add the following lines after the rest of the existing imports around line 80:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.index&#39;</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.detail&#39;</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.results&#39;</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="s">&#39;polls.views.vote&#39;</span><span class="p">),</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Eventually we will want to move this set of url configurations inside the urls app itself, but for the sake of brevity in this workshop, we will put them in the main urls.py for now. You can consult the Django tutorial for more information on this topic.</p>
</div>
<p>Next lets write the views to drive the url patterns we configured above. Edit polls/views.py to that it looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">Context</span><span class="p">,</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/index.html&#39;</span><span class="p">,</span>
        <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">:</span> <span class="n">latest_poll_list</span><span class="p">}))</span>

<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Poll</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/detail.html&#39;</span><span class="p">,</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">}))</span>

<span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;You&#39;re looking at the results of poll </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">poll_id</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;You&#39;re voting on poll </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">poll_id</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We have only stubbed in the views for the results and vote pages and they are not very useful as is. We will revisit these later.</p>
</div>
<p>Now we have views in place, but we are referencing templates that do not yet exist. Lets add them by first creating a template directory in your polls app as polls/templates/polls and creating polls/templates/polls/index.html to look like the following:</p>
<div class="highlight-python"><pre>{% if latest_poll_list %}
    &lt;ul&gt;
    {% for poll in latest_poll_list %}
        &lt;li&gt;&lt;a href="/polls/{{ poll.id }}/"&gt;{{ poll.question }}&lt;/a&gt;&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
{% else %}
    &lt;p&gt;No polls are available.&lt;/p&gt;
{% endif %}</pre>
</div>
<p>Next we need to create the template for the poll detail page. Create a new file at polls/templates/polls/detail.html to look like the following:</p>
<div class="highlight-python"><pre>&lt;h1&gt;{{ poll.question }}&lt;/h1&gt;
&lt;ul&gt;
{% for choice in poll.choice_set.all %}
    &lt;li&gt;{{ choice.choice }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;</pre>
</div>
<p>You can now visit <a class="reference external" href="http://localhost:8000/polls/">http://localhost:8000/polls/</a> in your browser and you should see the the poll question you created in the admin presented like this.</p>
<div class="figure">
<img alt="../_images/polls_plain.png" src="../_images/polls_plain.png" />
</div>
<p>We actually really want our polls app to display as part of our GeoNode project with the same theme, so lets update the 2 templates we created above to make them extend from the site_base.html template we looked at in the last section. You will need to add the following 2 lines to the top of each file:</p>
<div class="highlight-python"><pre>{% extends 'site_base.html' %}
{% block body %}</pre>
</div>
<p>And close the block at the bottom of each file with:</p>
<div class="highlight-python"><pre>{% endblock %}</pre>
</div>
<p>This tells Django to extend from the site_base.html template so your polls app has the same style as the rest of your GeoNode, and it specifies that the content in these templates should be rendered to the body block defined in GeoNode&#8217;s base.html template that your site_base.html extends from.</p>
<p>You can now visit the index page of your polls app and see that it is now wrapped in the same style as the rest of your geonode site.</p>
<div class="figure">
<img alt="../_images/polls_geonode.png" src="../_images/polls_geonode.png" />
</div>
<p>If you click on a question from the list you will be taken to the poll detail page.</p>
<div class="figure">
<img alt="../_images/poll_geonode_hidden.png" src="../_images/poll_geonode_hidden.png" />
</div>
<p>Looks like its empty, but in fact the text is there, but its been styled to white by the bootswatch theme we added in the last section. If you highlight the area where the text is, you will see that it is in fact there.</p>
<div class="figure">
<img alt="../_images/poll_geonode_highlight.png" src="../_images/poll_geonode_highlight.png" />
</div>
<p>Now that you have walked through the basic steps to create a very minimal (and currently mostly useless) Django app and integrate it with your GeoNode project, you should pick up the Django tutorial at part 4 and follow it to add the form for actually accepting responses to your poll questions.</p>
<p>Again, its strongly recommended that you spend as much time as you need with the Django tutorial itself until you feel comfortable with all of the concepts it coveres. They are the essential building blocks you will need to extend your GeoNode project by adding your own apps.</p>
</div>
<div class="section" id="adding-a-3rd-party-blog-app">
<h2>Adding a 3rd Party Blog App<a class="headerlink" href="#adding-a-3rd-party-blog-app" title="Permalink to this headline">¶</a></h2>
<p>Now that we have created our own app and added it to our GeoNode project, the next thing we will work through is adding a 3rd party Blog app. There are a large number of blog apps that you can use, but for purposes of this workshop, we will use a relatively simple, yet extensible app called Zinnia. You can find out more information about Zinnia on its website <a class="reference external" href="http://django-blog-zinnia.com/blog/">http://django-blog-zinnia.com/blog/</a> or on its GitHub project page <a class="reference external" href="https://github.com/Fantomas42/django-blog-zinnia">https://github.com/Fantomas42/django-blog-zinnia</a> or by following its documentation <a class="reference external" href="http://django-blog-zinnia.com/documentation/">http://django-blog-zinnia.com/documentation/</a>. This section will walk you through the minimal set of steps necessary to add Zinnia to your GeoNode project.</p>
<p>The first thing you need to do is to install Zinnia into the virtualenv that you are working in. Make sure your virtualenv is activated and execute the following command:</p>
<div class="highlight-python"><pre>$ pip install django-blog-zinnia</pre>
</div>
<p>This will install Zinnia and all of the libraries that it depends on.</p>
<p>Next add Zinna to the INSTALLED_APPS section of your GeoNode projects settings.py file by editing my_geonode/settings.py and adding &#8216;django.contrib.comments&#8217; to the section labeled &#8220;Apps Bundled with Django&#8221; so that it looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Apps bundled with Django</span>
<span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.sitemaps&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.humanize&#39;</span><span class="p">,</span>
<span class="s">&#39;django.contrib.comments&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>And then add the tagging, mptt and zinnia apps to the end of the INSTALLED_APPS where we previously added a section labeled &#8220;My GeoNode apps&#8221; in the previous part of this workshop section. It should like like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># My GeoNode apps</span>
<span class="s">&#39;polls&#39;</span><span class="p">,</span>
<span class="s">&#39;tagging&#39;</span><span class="p">,</span>
<span class="s">&#39;mptt&#39;</span><span class="p">,</span>
<span class="s">&#39;zinnia&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>Next you will need to run syncdb again to synchronize the models for the apps we have just added to our project&#8217;s database. This time we want to pass the &#8211;all flag to syncdb so it ignores the schema migrations. Schema migrations are discussed further in GeoNode&#8217;s documentation, but its safe to ignore them here.</p>
<blockquote>
<div>$ python manage.py syncdb &#8211;all</div></blockquote>
<p>You can now restart the development server and visit the Admin interface and scroll to the very bottom of the list to find a section for Zinnia that allows you to manage database records for Categories and Blog Entries.</p>
<div class="figure">
<img alt="../_images/zinnia_admin.png" src="../_images/zinnia_admin.png" />
</div>
<p>Next we need to configure our project to add Zinnia&#8217;s URL configurations. Add the following 2 url config entries to the end of my_geonode/urls.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^blog/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;zinnia.urls&#39;</span><span class="p">)),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^djcomments/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;django.contrib.comments.urls&#39;</span><span class="p">)),</span>
</pre></div>
</div>
<p>If you visit the main blog page in your browser at <a class="reference external" href="http://localhost:8000/blog/">http://localhost:8000/blog/</a> you will find that the blog displays with Zinnia&#8217;s default theme as shown below.</p>
<div class="figure">
<img alt="../_images/zinnia_default.png" src="../_images/zinnia_default.png" />
</div>
<p>This page includes some guidance for us on how to change the default theme. The first thing we need to do is to copy zinnia&#8217;s base.html template into our own project so we can modify it. When you pip installed Zinnia, its templates were installed to /var/lib/geonode/lib/python2.7/site-packages/zinnia/templates/zinnia/. You can copy the base template by executing the following commands:</p>
<div class="highlight-python"><pre>$ mkdir my_geonode/templates/zinnia
$ cp /var/lib/geonode/lib/python2.7/site-packages/zinnia/templates/zinnia/base.html my_geonode/templates/zinnia/</pre>
</div>
<p>Then you need to edit this file and change the topmost line to read as below such that this template extends from our projects site_base.html rather than the zinnia skeleton.html:</p>
<div class="highlight-python"><pre>{% extends "site_base.html" %}</pre>
</div>
<p>Since Zinnia uses a bit different block naming scheme than GeoNode does, you need to add the following line to the bottom of your site_base.html file so that the content block gets rendered properl:</p>
<div class="highlight-python"><pre>{% block body %}{% block content %}{% endblock %}{% endblock %}</pre>
</div>
<div class="figure">
<img alt="../_images/zinnia_geonode.png" src="../_images/zinnia_geonode.png" />
</div>
<p>You can see that there are currently no blog entries, so lets add one. Scroll to the bottom of the interface and click the &#8220;Post an Entry&#8221; link to go to the form in the Admin interface that lets you create a blog post. Go ahead and fill out the form with some information for testing purposes. Make sure that you change the Status dropdown to &#8220;published&#8221; so the post shows up right away.</p>
<div class="figure">
<img alt="../_images/zinnia_create_post.png" src="../_images/zinnia_create_post.png" />
</div>
<p>You can explore all of the options available to you as you create your post, and when you are done, click the Save button. You will be taken to the page that shows the list of all your blog posts.</p>
<div class="figure">
<img alt="../_images/zinnia_post_list.png" src="../_images/zinnia_post_list.png" />
</div>
<p>You can then visit your blog post/entry at <a class="reference external" href="http://localhost:8000/blog/">http://localhost:8000/blog/</a></p>
<div class="figure">
<img alt="../_images/zinnia_blog.png" src="../_images/zinnia_blog.png" />
</div>
<p>And if you click on the blog post title, you will be taken to the page for the complete blog post. You and your users can leave comments on this post and various other blog features from this page.</p>
<div class="figure">
<img alt="../_images/zinnia_post.png" src="../_images/zinnia_post.png" />
</div>
<p>The last thing we need to do to fully integrate this blog app (and our polls app) into our site is to add it to the options on the navbar. To do so, we need to add the following block override to our Projects site_base.html:</p>
<div class="highlight-python"><pre>{% block extra-nav %}
&lt;li id="nav_polls"&gt;
    &lt;a href="/polls/"&gt;Polls&lt;/a&gt;
&lt;/li&gt;
&lt;li id="nav_blog"&gt;
    &lt;a href="{% url zinnia_entry_archive_index %}"&gt;Blog&lt;/a&gt;
&lt;/li&gt;
{% endblock %}</pre>
</div>
<div class="figure">
<img alt="../_images/navbar_add.png" src="../_images/navbar_add.png" />
</div>
<p>At this point, you could explore options for tighter integration between your GeoNode project and Zinnia. Integrating blog posts from Zinnia into your overall search could be useful, as well as including the blog posts a user has written on their Profile Page. You could also explore the additional plugins that go with Zinnia.</p>
</div>
<div class="section" id="adding-other-apps">
<h2>Adding Other Apps<a class="headerlink" href="#adding-other-apps" title="Permalink to this headline">¶</a></h2>
<p>Now that you have both written your own app and plugged in a 3rd party one, you can explore sites like Django Packages to look for other modules that you could plug into your GeoNode project to meet your needs and requirements. For many types of apps, there are several options and Django Packages is a nice way to compare them. You may find that some apps require significantly more work to integrate into your app than others, but reaching out to the app&#8217;s author and/or developers should help you get over any difficulties you may encounter.</p>
<div class="figure">
<img alt="../_images/django_packages.png" src="../_images/django_packages.png" />
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright GeoNode Development Community.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>